{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Estadísticas</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
<div class="container mt-5">
    <h2 class="text-center mb-4">Estadísticas de la Biblioteca</h2>
    {% if error %}
        <div class="alert alert-danger">{{ error }}</div>
    {% else %}
        <p><strong>Género más guardado:</strong> {{ genero_mas }} ({{ genero_mas_count }})</p>
        <p><strong>Género con menos libros:</strong> {{ genero_menos }} ({{ genero_menos_count }})</p>
        <p><strong>Libro con mejor calificación:</strong> {{ book_best }} ({{ book_best_count }})</p>
        <p><strong>Libro con peor calificación:</strong> {{ book_worst }} ({{ book_worst_count }})</p>
        <p><strong>Usuario con más reseñas:</strong> {{ top_user }} ({{ top_user_count }})</p>
        <div class="row">
            <div class="col-md-4">
                <img class="img-fluid" src="data:image/png;base64,{{ grafico_genero }}" alt="Gráfico género">
            </div>
            <div class="col-md-4">
                <img class="img-fluid" src="data:image/png;base64,{{ grafico_calificacion }}" alt="Gráfico calificaciones">
            </div>
            <div class="col-md-4">
                <img class="img-fluid" src="data:image/png;base64,{{ grafico_usuarios }}" alt="Gráfico usuarios">
            </div>
        </div>
    {% endif %}
    <div class="mt-4">
        <a href="{% url 'biblioteca_libros' %}" class="btn btn-secondary">Volver a la biblioteca</a>
    </div>
</div>
</body>
</html>